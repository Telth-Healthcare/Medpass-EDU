import{x as F,j as e,X as H,a7 as ae,r as l,E as f,T as g,k as o,l as x,y as j,a8 as ne}from"./index-D2RzZOxE.js";import{C as R}from"./Close-Ce2Zq2cd.js";import{u as A,T as E,M as N,C as le,a as I,b as W,c as P}from"./index.esm-5xj4LR9k.js";import{u as oe,a as ce,T as de,b as ue,c as B,g as me,d as he}from"./UserTypesApi-iRzO7hUH.js";import{G as h}from"./Grid-DHlN3wQ6.js";import{I as w}from"./IconButton-CrdpUguL.js";import{E as ye}from"./EmailRoleModal-DGRTx2-M.js";import{c as xe}from"./createLucideIcon-D2ybMzJc.js";import{M as V}from"./MenuItem-D4b2uCv6.js";import{M as K}from"./Modal-fD6BrgSg.js";import{E as ve}from"./Edit-VvtwGzb-.js";import"./VisibilityOff-OVoZowFg.js";import"./FormControlLabel-BkPtrJae.js";import"./DialogTitle-BOh6f4ps.js";import"./ListItemIcon-B-ed5IYr.js";import"./Divider-C5GvEAwZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=xe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),L=F(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),be=F(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),q=F(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),ge=H(ae)(({theme:t})=>({padding:t.spacing(3),marginTop:t.spacing(2),transition:"all 0.3s ease"})),fe=t=>{const[v,d]=l.useState(null),[p,c]=l.useState(""),m=l.useRef(null),[i,C]=l.useState({university_name:"",university_email:"",university_address:"",established_year:"",website:"",contact_number:"",id:0});l.useEffect(()=>{t.universityData&&(C({university_name:t.universityData.university_name||"",university_email:t.universityData.university_email||"",university_address:t.universityData.university_address||"",established_year:t.universityData.established_year||"",website:t.universityData.website||"",contact_number:t.universityData.contact_number||"",id:t.universityData.id||""}),t.universityData.university_logo&&c(t.universityData.university_logo))},[t.universityData]);const y=r=>{const{name:a,value:u}=r.target;C(_=>({..._,[a]:u}))},k=()=>{const r=new FormData;r.append("university_name",i.university_name),r.append("university_email",i.university_email),r.append("university_address",i.university_address),r.append("established_year",i.established_year),r.append("website",i.website),r.append("contact_number",i.contact_number),r.append("id",i.id),v&&r.append("university_logo",v),oe(i.id,r).then(()=>{j.success("University Updated Successfully"),C({university_name:"",university_email:"",university_address:"",established_year:"",website:"",contact_number:"",id:""}),d(null),c(""),t.onCancel&&t.onCancel()}).catch(a=>{j.error("Error update university"),console.error(a)})},b=r=>{r.preventDefault();const a=new FormData;a.append("university_name",i.university_name),a.append("university_email",i.university_email),a.append("university_address",i.university_address),a.append("established_year",i.established_year),a.append("website",i.website),a.append("contact_number",i.contact_number),v&&a.append("university_logo",v),ce(a).then(()=>{j.success("University Created Successfully"),C({university_name:"",university_email:"",university_address:"",established_year:"",website:"",contact_number:"",id:""}),d(null),c(""),t.onCancel&&t.onCancel()}).catch(u=>{j.error("Error creating university"),console.error(u)})},U=()=>{d(null),c(""),m.current&&(m.current.value="")},z=r=>{const a=r.target.files[0];if(a){if(!a.type.startsWith("image/")){alert("Please select an image file");return}if(a.size>5*1024*1024){alert("File size must be less than 5MB");return}d(a);const u=new FileReader;u.onload=_=>{c(_.target.result)},u.readAsDataURL(a)}};return e.jsxs(ge,{elevation:10,children:[e.jsx(f,{variant:"h6",gutterBottom:!0,color:"primary",sx:{mb:2},children:"Add New University"}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"University Name",name:"university_name",value:i.university_name,onChange:y,required:!0,variant:"outlined",size:"small"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"University Email",name:"university_email",type:"email",value:i.university_email,onChange:y,required:!0,variant:"outlined",size:"small"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Established Year",name:"established_year",type:"number",value:i.established_year,onChange:y,required:!0,variant:"outlined",size:"small",inputProps:{min:1800,max:new Date().getFullYear()}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Contact Number",name:"contact_number",type:"tel",value:i.contact_number,onChange:y,required:!0,variant:"outlined",size:"small"})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(f,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:"medium",mb:1},children:"University Logo"}),p?e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(o,{component:"img",src:p,alt:"Logo preview",sx:{width:100,height:100,objectFit:"contain",border:"1px solid #e0e0e0",borderRadius:1,p:1,backgroundColor:"#fafafa"}}),e.jsx(w,{color:"error",onClick:U,size:"small",sx:{border:"1px solid #e0e0e0"},children:e.jsx(q,{fontSize:"small"})})]}):e.jsxs(o,{sx:{border:"2px dashed #e0e0e0",borderRadius:2,p:2,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"#fafafa","&:hover":{borderColor:"primary.main",backgroundColor:"action.hover"}},onClick:()=>{var r;return(r=m.current)==null?void 0:r.click()},children:[e.jsx(be,{sx:{fontSize:32,color:"text.secondary",mb:1}}),e.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Click to upload logo"}),e.jsx(f,{variant:"caption",color:"text.secondary",children:"PNG, JPG up to 5MB"})]}),e.jsx("input",{type:"file",ref:m,onChange:z,accept:"image/*",style:{display:"none"}})]}),e.jsx(h,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,label:"University Address",name:"university_address",value:i.university_address,onChange:y,required:!0,multiline:!0,rows:3,variant:"outlined",size:"small"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(g,{fullWidth:!0,label:"Website",name:"website",value:i.website,onChange:y,variant:"outlined",size:"small",placeholder:"https://example.com"})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:2,pt:0},children:[t.universityData&&t.universityData.id?e.jsx(x,{type:"submit",variant:"contained",size:"medium",sx:{minWidth:150},onClick:k,children:"Update University"}):e.jsx(x,{type:"submit",variant:"contained",size:"medium",sx:{minWidth:150},onClick:b,children:"Create University"}),e.jsx(x,{type:"button",variant:"outlined",size:"medium",onClick:t.onCancel,sx:{minWidth:100},children:"Cancel"})]})})]})]})},G=H(o)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.spacing(2),padding:t.spacing(2),backgroundColor:t.palette.background.default,borderRadius:t.shape.borderRadius}));function Ie(){const[t,v]=l.useState("1"),[d,p]=l.useState(!1),[c,m]=l.useState(!1),[i,C]=l.useState([]),[y,k]=l.useState([]),[b,U]=l.useState(),[z,r]=l.useState(!1);let a="UNIVERSITY_ADMIN";const u=()=>{me().then(s=>{k(s.results)})};l.useEffect(()=>{u()},[]);const _=()=>{!b||!b.id||he(b.id).then(()=>{j.success("University deleted successfully"),u()}).catch(s=>{console.error("Error deleting university:",s),j.error("Failed to delete university")}).finally(()=>{r(!1)})},Y=(s,n)=>{v(n)},O=()=>{p(!d),c&&m(!1)},J=()=>{m(!c),d&&p(!1)},S=()=>{p(!1),m(!1),u()},M=()=>{r(!1)},X=l.useMemo(()=>[{accessorKey:"userName",header:"User Name",size:150},{accessorKey:"email",header:"Email",size:200},{accessorKey:"number",header:"Phone Number",size:150},{accessorKey:"role",header:"Role",size:100},{accessorKey:"status",header:"Status",size:100,Cell:({cell:s})=>e.jsx(o,{component:"span",sx:n=>({backgroundColor:s.getValue()==="Active"?n.palette.success.light:n.palette.error.light,color:s.getValue()==="Active"?n.palette.success.dark:n.palette.error.dark,borderRadius:"0.25rem",p:"0.25rem 0.5rem",fontWeight:"bold"}),children:s.getValue()})},{accessorKey:"createdAt",header:"Created At",size:150}],[]),Q=l.useMemo(()=>[{id:"actions",header:"Actions",size:100,Cell:({row:s})=>{const[n,T]=l.useState(null),ee=!!n,te=re=>{T(re.currentTarget)},D=()=>{T(null)},se=()=>{D(),U(s.original),m(!0)},ie=()=>{D(),r(!0),U(s.original)};return e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:te,children:e.jsx(pe,{})}),e.jsxs(ne,{anchorEl:n,open:ee,onClose:D,children:[e.jsx(V,{onClick:se,children:"Update"}),e.jsx(V,{onClick:ie,children:"Delete"})]})]})}},{accessorKey:"university_logo",header:"Logo",size:100,Cell:({cell:s})=>{const n=s.getValue();return n?e.jsx("img",{src:n,alt:"University Logo",style:{width:40,height:40,objectFit:"contain",borderRadius:"4px"}}):e.jsx(o,{sx:{width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.200",color:"text.secondary",fontSize:12,borderRadius:"4px"},children:"N/A"})}},{accessorKey:"university_name",header:"University Name",size:200},{accessorKey:"university_email",header:"Email",size:200},{accessorKey:"established_year",header:"Established Year",size:150},{accessorKey:"university_address",header:"Location",size:200},{accessorKey:"contact_number",header:"Students",size:120},{accessorKey:"is_active",header:"Status",size:100,Cell:({cell:s})=>e.jsx(o,{component:"span",sx:n=>({backgroundColor:s.getValue()?n.palette.success.light:n.palette.error.light,color:s.getValue()?n.palette.success.dark:n.palette.error.dark,borderRadius:"0.25rem",p:"0.25rem 0.5rem",fontWeight:"bold"}),children:s.getValue()?"Active":"Inactive"})}],[]),Z=A({columns:X,data:i,enableRowSelection:!1,enableColumnOrdering:!0,enableFacetedValues:!0,initialState:{showGlobalFilter:!0},positionGlobalFilter:"left",renderTopToolbar:({table:s})=>e.jsxs(o,{sx:{display:"flex",gap:"0.5rem",p:"0.5rem",flexWrap:"wrap"},children:[e.jsx(I,{table:s}),e.jsx(W,{table:s})]}),renderRowActions:({row:s})=>e.jsxs(o,{sx:{display:"flex",gap:"0.5rem"},children:[e.jsx(P,{title:"Edit",children:e.jsx(w,{onClick:()=>console.log("Edit user:",s.original),children:e.jsx(ve,{})})}),e.jsx(P,{title:"Delete",children:e.jsx(w,{color:"error",onClick:()=>console.log("Delete user:",s.original),children:e.jsx(q,{})})})]}),muiTablePaperProps:{elevation:3}}),$=A({columns:Q,data:y,enableRowSelection:!1,enableColumnOrdering:!0,enableFacetedValues:!0,initialState:{showGlobalFilter:!0},positionGlobalFilter:"left",renderTopToolbar:({table:s})=>e.jsxs(o,{sx:{display:"flex",gap:"0.5rem",p:"0.5rem",flexWrap:"wrap"},children:[e.jsx(I,{table:s}),e.jsx(W,{table:s})]}),muiTablePaperProps:{elevation:6},muiTableBodyRowProps:{sx:{height:"36px"}},muiTableBodyCellProps:{sx:{py:"4px"}}});return e.jsx(o,{sx:{width:"100%",typography:"body1",p:2},children:e.jsxs(de,{value:t,children:[e.jsx(o,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ue,{onChange:Y,centered:!0,children:[e.jsx(E,{label:"User Management",value:"1"}),e.jsx(E,{label:"University Management",value:"2"})]})}),e.jsxs(B,{value:"1",sx:{p:0,mt:2},children:[e.jsxs(G,{children:[e.jsx(f,{variant:"h5",fontWeight:"bold",children:"User Management"}),e.jsx(x,{variant:"contained",startIcon:d?e.jsx(R,{}):e.jsx(L,{}),onClick:O,color:d?"secondary":"primary",children:d?"Cancel":"Add User"})]}),e.jsx(ye,{open:d,role:a,onClose:S}),e.jsx(N,{table:Z})]}),e.jsxs(B,{value:"2",sx:{p:0,mt:1},children:[e.jsxs(G,{children:[e.jsx(f,{variant:"h5",fontWeight:"bold",children:"University Management"}),e.jsx(x,{variant:"contained",startIcon:c?e.jsx(R,{}):e.jsx(L,{}),onClick:J,color:c?"secondary":"primary",children:c?"Cancel":"Add University"})]}),e.jsx(le,{in:c,children:e.jsx(o,{sx:{p:1,mb:1,border:"1px solid",borderColor:"divider",borderRadius:1},children:e.jsx(fe,{onCancel:S,universityData:b})})}),e.jsx(N,{table:$})]}),e.jsx(K,{show:z,onHide:M,centered:!0,backdrop:"static",children:e.jsxs(K.Body,{className:"text-center p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirm Logout"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Are you sure you want to logout from the system?"}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx(x,{variant:"outline-secondary",onClick:M,className:"px-4 py-2",children:"Cancel"}),e.jsx(x,{variant:"danger",onClick:_,className:"px-4 py-2",children:"Delete"})]})]})})]})})}export{Ie as default};
