import{H as ce,r as a,R as oe,j as e,I as de,J as xe,K as me}from"./index-D2RzZOxE.js";import{E as he}from"./EmailRoleModal-DGRTx2-M.js";import{c as v}from"./createLucideIcon-D2ybMzJc.js";import{S as ue}from"./search-CMJeHf_M.js";import{C as pe}from"./calendar-CZ82pfVM.js";import"./DialogTitle-BOh6f4ps.js";import"./IconButton-CrdpUguL.js";import"./Close-Ce2Zq2cd.js";import"./MenuItem-D4b2uCv6.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=v("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=v("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=v("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=v("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function ye(d){return ce({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#78909C",d:"M40,41H8c-2.2,0-4-1.8-4-4l0-20.9c0-1.3,0.6-2.5,1.7-3.3L24,0l18.3,12.8c1.1,0.7,1.7,2,1.7,3.3V37 C44,39.2,42.2,41,40,41z"},child:[]},{tag:"rect",attr:{x:"12",y:"11",fill:"#fff",width:"24",height:"22"},child:[]},{tag:"path",attr:{fill:"#CFD8DC",d:"M40,41H8c-2.2,0-4-1.8-4-4l0-20l20,13l20-13v20C44,39.2,42.2,41,40,41z"},child:[]},{tag:"g",attr:{fill:"#4CAF50"},child:[{tag:"rect",attr:{x:"22",y:"14",width:"4",height:"12"},child:[]},{tag:"rect",attr:{x:"18",y:"18",width:"12",height:"4"},child:[]}]}]})(d)}const je="/assets/Sort-Cu-nlt9x.png",be="/assets/Filter-B5gug-sj.png",Ne=({open:d,onClose:j,onConfirm:c,message:b,confirmLabel:C="Delete"})=>d?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",onClick:j,children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6 shadow-lg",onClick:x=>x.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirm"}),e.jsx("p",{className:"text-sm text-gray-700 mb-6",children:b}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"px-4 py-2 border rounded-md",onClick:j,children:"Cancel"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-md",children:C})]})]})}):null,Pe=()=>{const[d,j]=a.useState([]),[c,b]=a.useState([]),[C,x]=a.useState(!0),[h,z]=a.useState(1),[q,K]=a.useState(0),[X,G]=a.useState(null),[J,W]=a.useState(null),[u,F]=a.useState([]),[k,E]=a.useState(""),[O,L]=a.useState({}),[B,R]=a.useState(!1),[_,p]=a.useState(!1),[Q,f]=a.useState(!1),S=10,[m,D]=a.useState(new Set),[Y,N]=a.useState(!1),[M,I]=a.useState([]),[Z,V]=a.useState(""),[i,A]=a.useState(null),$=async(t=1)=>{try{x(!0);const s=await xe(t);j(s.results),K(s.count),G(s.next),W(s.previous),s.results.length>0?b(Object.keys(s.results[0])):b([])}catch(s){console.error("Error fetching users:",s)}finally{x(!1)}};a.useEffect(()=>{$(h)},[h]);const P=Math.ceil(q/S),w=d.filter(t=>{const s=u.length===0||u.some(r=>Object.values(t).join(" ").toLowerCase().includes(r.toLowerCase())),l=Object.entries(O).every(([r,n])=>{var o;return!n||n.length===0?!0:n.includes((o=t[r])==null?void 0:o.toString())});return s&&l}),ee=oe.useMemo(()=>{if(!i)return w;const{column:t,direction:s}=i;return[...w].sort((l,r)=>{const n=l[t],o=r[t];return n==null?1:o==null?-1:n===o?0:s==="asc"?n>o?1:-1:n<o?1:-1})},[w,i]),H=(h-1)*S,g=ee.slice(H,H+S),te=t=>Array.from(new Set(d.map(s=>{var l;return(l=s[t])==null?void 0:l.toString()}).filter(Boolean))),se=t=>typeof t=="boolean"?t?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"})," True"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"})," False"]}):t==="active"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"})," Active"]}):t==="inactive"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(pe,{className:"w-3 h-3 mr-1"})," Inactive"]}):t==="resigned"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"})," Resigned"]}):(t==null?void 0:t.toString())||"-",le=t=>{D(s=>{const l=new Set(s);return l.has(t)?l.delete(t):l.add(t),l})},ae=()=>{const t=g.map(s=>s.id);D(s=>{const l=new Set(s);return t.every(n=>l.has(n))?t.forEach(n=>l.delete(n)):t.forEach(n=>l.add(n)),l})},ne=(t,s)=>{I([t]),V(`Are you sure you want to delete ${s?`${s}`:"this user"}? This action cannot be undone.`),N(!0)},re=()=>{const t=Array.from(m);if(t.length===0){alert("Please select at least one user to delete.");return}I(t),V(`Are you sure you want to delete ${t.length} selected user(s)? This action cannot be undone.`),N(!0)},ie=async()=>{if(N(!1),M.length!==0)try{x(!0),await Promise.all(M.map(async t=>{try{await me(t)}catch(s){console.error(`Failed to delete ${t}:`,s)}})),await $(h),D(t=>{const s=new Set(t);return M.forEach(l=>s.delete(l)),s}),I([]),alert("Deletion completed.")}catch(t){console.error("Delete failed:",t),alert("Some deletes may have failed. Check console.")}finally{x(!1)}},T=({src:t,alt:s="icon",onClick:l,title:r})=>e.jsxs("button",{onClick:l,title:r,className:"relative group h-9 w-9 flex items-center justify-center p-1 rounded-md hover:bg-gray-100 transition",style:{minWidth:36},children:[e.jsx("img",{src:t,alt:s,className:"max-h-full max-w-full object-contain pointer-events-none"}),e.jsx("span",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:r})]});return e.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Details"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{style:{color:"#e4122eff",cursor:"pointer"},onClick:()=>R(!0),children:e.jsx(ye,{size:35})}),B&&e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(he,{open:B,onClose:()=>R(!1)})}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 hover:transform hover:scale-105",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-600 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:k,onChange:t=>E(t.target.value),onKeyDown:t=>{t.key==="Enter"&&k.trim()&&(F([...u,k.trim()]),E(""))},className:"pl-10 pr-4 py-2 border border-gray-500 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((t,s)=>e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs flex items-center space-x-1",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:()=>F(u.filter((l,r)=>r!==s)),className:"ml-1",children:e.jsx(y,{className:"w-3 h-3"})})]},s))}),e.jsx(T,{src:be,alt:"filter",onClick:()=>p(!0),title:"Filter"}),e.jsx(T,{src:je,alt:"sort",onClick:()=>f(!0),title:"Sort"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",g.length," of ",w.length," users"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:C?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[" ",e.jsx(de,{})," "]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 ",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",onChange:ae,checked:g.length>0&&g.every(t=>m.has(t.id)),"aria-label":"Select all visible",className:"mr-2 border-purp"}),e.jsx("span",{className:"hidden sm:inline",children:"Select"})]})}),c.map(t=>e.jsx("th",{className:"px-6 py-3 text-left text-xs text-white bg-violet-500 font-medium uppercase tracking-wider",children:t},t)),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("input",{type:"checkbox",checked:m.has(t.id),onChange:()=>le(t.id),"aria-label":`Select ${t.id}`})}),c.map((l,r)=>{var n;return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r===0?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-blue-800",children:(n=t[l])==null?void 0:n.toString().charAt(0).toUpperCase()})}),e.jsx("div",{children:t[l]})]}):se(t[l])},l)}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>ne(t.id,t[c[0]]),className:"text-red-600 hover:text-red-800 flex items-center space-x-1",children:[e.jsx(ge,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Delete"})]})})})]},s))})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[m.size," selected"]}),e.jsx("button",{onClick:re,disabled:m.size===0,className:`px-3 py-1 text-sm rounded-md ${m.size===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-600 text-white"}`,children:"Delete Selected"})]}),P>1&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>z(t=>Math.max(1,t-1)),disabled:!J,className:"px-3 py-1 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",h," of ",P]}),e.jsx("button",{onClick:()=>z(t=>Math.min(P,t+1)),disabled:!X,className:"px-3 py-1 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 flex justify-end z-50",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-white w-80 h-screen p-6 shadow-lg overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Filters"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(y,{className:"w-6 h-6 text-gray-600"})})]}),c.map(t=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:t}),e.jsxs("select",{value:O[t]||"",onChange:s=>L(l=>({...l,[t]:s.target.value})),className:"w-full border px-2 py-1 rounded",children:[e.jsx("option",{value:"",children:"All"}),te(t).map(s=>e.jsx("option",{value:s,children:s},s))]})]},t)),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:()=>{L({}),p(!1)},className:"px-4 py-2 border rounded",children:"Reset"}),e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Apply"})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 flex justify-end z-50",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-white w-72 h-screen p-6 shadow-lg overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Sorting"}),e.jsx("button",{onClick:()=>f(!1),children:e.jsx(y,{className:"w-6 h-6 text-gray-600"})})]}),e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Column"}),e.jsxs("select",{value:(i==null?void 0:i.column)||"",onChange:t=>A(s=>({column:t.target.value,direction:(s==null?void 0:s.direction)||"asc"})),className:"w-full border px-2 py-1 rounded mb-4",children:[e.jsx("option",{value:"",children:"None"}),c.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Direction"}),e.jsxs("select",{value:(i==null?void 0:i.direction)||"asc",onChange:t=>A(s=>s?{...s,direction:t.target.value}:{column:c[0],direction:t.target.value}),className:"w-full border px-2 py-1 rounded",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:()=>{A(null),f(!1)},className:"px-4 py-2 border rounded",children:"Clear"}),e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Apply"})]})]})}),e.jsx(Ne,{open:Y,onClose:()=>N(!1),onConfirm:ie,message:Z,confirmLabel:"Delete"})]})};export{Pe as default};
